#!/usr/bin/env perl
use strict;
use warnings;
use DBI;
use Data::Dumper;
use Dotenv -load;

my $vinland = DBI->connect(
    sprintf('DBI:Pg:database=%s;host=%s', $ENV{'VINLAND_DB_DATABASE'}, $ENV{'VINLAND_DB_HOSTNAME'}),
    $ENV{'VINLAND_DB_USERNAME'},
    $ENV{'VINLAND_DB_PASSWORD'},
);

$vinland->do('
    INSERT INTO proteins_xrefs (protein_id, source, ref)
    SELECT id, \'accession\', accession FROM proteins
    WHERE type = \'h\'
');

$vinland->do('
    INSERT INTO proteins_xrefs (protein_id, source, ref)
    SELECT id, \'name\', name FROM proteins
    WHERE type = \'h\'
');
